<!DOCTYPE html>
<html>
<head>
    <title>MoleculeViewer Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { color: white; text-align: center; }
        button { padding: 15px 30px; font-size: 16px; cursor: pointer; margin: 10px; border-radius: 6px; border: none; background: white; color: #667eea; font-weight: bold; }
        button:hover { background: #f0f0f0; }
        #result { background: white; padding: 20px; border-radius: 8px; margin-top: 20px; min-height: 300px; }
        #info { background: #e8f4f8; padding: 15px; border-radius: 6px; margin-top: 15px; }
        input { padding: 10px; margin: 5px; width: 200px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§ª MoleculeViewer - Test Page</h1>
        
        <div style="text-align: center;">
            <input type="text" id="nameInput" placeholder="Enter compound name..." value="benzene">
            <button onclick="testBenzene()">Load Benzene</button>
            <button onclick="testAspirin()">Load Aspirin</button>
            <button onclick="testCaffeine()">Load Caffeine</button>
        </div>
        
        <div id="result">
            <p style="color: #ccc; text-align: center;">Click a button to load a molecule...</p>
        </div>
        
        <div id="info"></div>
    </div>
    
    <script>
        async function loadMolecule(name) {
            console.log('Loading molecule:', name);
            const resultDiv = document.getElementById('result');
            const infoDiv = document.getElementById('info');
            
            resultDiv.innerHTML = '<p style="text-align: center; color: #999;">Loading...</p>';
            infoDiv.innerHTML = '';
            
            try {
                const response = await fetch('http://localhost:5000/api/nomenclature-to-svg', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        nomenclature: name,
                        width: 600,
                        height: 500,
                        options: {
                            aromatic_circles: true,
                            show_carbons: false,
                            show_methyls: false,
                            fancy_bonds: true,
                            atom_numbers: false,
                            hydrogens: "keep",
                            flip_horizontal: false,
                            flip_vertical: false,
                            rotate: 0,
                            recalculate_coordinates: false
                        }
                    })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    resultDiv.innerHTML = '<p style="color: red;"><b>Error:</b> ' + data.error + '</p>';
                    return;
                }
                
                resultDiv.innerHTML = data.svg;
                
                let infoHtml = '<h3 style="color: #0099cc; margin-top: 0;">Molecular Information</h3>';
                if (data.source) {
                    infoHtml += '<p><b>Source:</b> ' + data.source + '</p>';
                }
                if (data.info) {
                    infoHtml += '<p><b>Formula:</b> ' + data.info.formula + '</p>';
                    infoHtml += '<p><b>Molecular Weight:</b> ' + data.info.molecular_weight.toFixed(2) + ' g/mol</p>';
                    infoHtml += '<p><b>Number of Atoms:</b> ' + data.info.num_atoms + '</p>';
                    infoHtml += '<p><b>SMILES:</b> <code>' + data.smiles + '</code></p>';
                }
                infoDiv.innerHTML = infoHtml;
                
                console.log('Successfully loaded:', data);
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;"><b>Error:</b> ' + error.message + '</p>';
                console.error('Error:', error);
            }
        }
        
        function testBenzene() { loadMolecule('benzene'); }
        function testAspirin() { loadMolecule('aspirin'); }
        function testCaffeine() { loadMolecule('caffeine'); }
    </script>
</body>
</html>
