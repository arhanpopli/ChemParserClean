<!DOCTYPE html>
<html>
<head>
    <title>Test 3D Viewer Integration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        h1 {
            color: #667eea;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .button {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 5px;
        }
        .button:hover {
            background: #5568d3;
        }
        #viewer-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª 3D Viewer Test Page</h1>
    
    <div class="test-section">
        <h2>Direct Viewer Test</h2>
        <p>Click to test the 3D viewer with different molecules:</p>
        <button class="button" onclick="openViewer('histamine')">Histamine</button>
        <button class="button" onclick="openViewer('aspirin')">Aspirin</button>
        <button class="button" onclick="openViewer('caffeine')">Caffeine</button>
        <button class="button" onclick="openViewer('dopamine')">Dopamine</button>
    </div>

    <div class="test-section">
        <h2>Embedded Viewer (how it appears in extension)</h2>
        <div id="viewer-container"></div>
        <button class="button" onclick="embedViewer('histamine')">Embed Histamine</button>
        <button class="button" onclick="embedViewer('glucose')">Embed Glucose</button>
    </div>

    <div class="test-section">
        <h2>Type Chemistry Formulas</h2>
        <p>Once the extension is loaded, type these formulas on this page:</p>
        <ul>
            <li><code>chem:histamine:</code></li>
            <li><code>chem:aspirin:</code></li>
            <li><code>chem:caffeine:</code></li>
        </ul>
        <p><strong>Make sure "Enable 3D Viewer" is ON in Developer Options!</strong></p>
    </div>

    <script>
        function openViewer(name) {
            const url = `http://localhost:5002/static/viewer-3d.html?name=${name}`;
            window.open(url, '_blank', 'width=800,height=600');
        }

        function embedViewer(name) {
            const container = document.getElementById('viewer-container');
            container.innerHTML = `
                <div style="
                    width: 600px;
                    height: 400px;
                    border: 2px solid #667eea;
                    border-radius: 8px;
                    overflow: hidden;
                    background: #0f0f1e;
                    position: relative;
                ">
                    <iframe 
                        src="http://localhost:5002/static/viewer-3d.html?name=${name}&embed=true"
                        style="width: 100%; height: 100%; border: none;"
                    ></iframe>
                    <div style="
                        position: absolute;
                        bottom: 10px;
                        left: 10px;
                        background: rgba(0,0,0,0.7);
                        color: white;
                        padding: 6px 12px;
                        border-radius: 6px;
                        font-size: 13px;
                        pointer-events: none;
                    ">${name}</div>
                </div>
            `;
        }
    </script>
</body>
</html>
