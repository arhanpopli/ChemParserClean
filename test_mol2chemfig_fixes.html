<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mol2chemfig Fixes Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1000px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }

    h1 {
      color: #2c3e50;
      border-bottom: 3px solid #3498db;
      padding-bottom: 10px;
    }

    h2 {
      color: #34495e;
      margin-top: 30px;
      border-left: 4px solid #3498db;
      padding-left: 12px;
    }

    .test-section {
      background: #f8f9fa;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .molecule-example {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 15px;
      margin: 10px 0;
    }

    .molecule-label {
      font-weight: bold;
      color: #2980b9;
      margin-bottom: 5px;
    }

    .instructions {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
    }

    .instructions h3 {
      margin-top: 0;
      color: #856404;
    }

    .instructions ol {
      margin-left: 20px;
    }

    .instructions li {
      margin: 8px 0;
    }

    .success-criteria {
      background: #d4edda;
      border: 1px solid #28a745;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
    }

    .success-criteria h3 {
      margin-top: 0;
      color: #155724;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background: #1a1a1a;
        color: #e0e0e0;
      }

      h1, h2 {
        color: #e0e0e0;
      }

      .test-section {
        background: #2a2a2a;
        border-color: #444;
      }

      .molecule-example {
        background: #1e1e1e;
        border-color: #444;
      }

      .instructions {
        background: #3a3a00;
        border-color: #ffc107;
      }

      .instructions h3 {
        color: #ffd54f;
      }

      .success-criteria {
        background: #1a3a1a;
        border-color: #28a745;
      }

      .success-criteria h3 {
        color: #7ed37e;
      }
    }
  </style>
</head>
<body>
  <h1>mol2chemfig Fixes Test Page</h1>

  <div class="instructions">
    <h3>Setup Instructions</h3>
    <ol>
      <li>Open the Chrome extension popup</li>
      <li>Select <strong>mol2chemfig</strong> as the renderer engine</li>
      <li>Enable the <strong>Aromatic circles</strong> option</li>
      <li>Reload this page to apply changes</li>
      <li>Toggle dark mode using your OS settings or browser DevTools to test dark mode fix</li>
    </ol>
  </div>

  <div class="test-section">
    <h2>Test 1: Aromatic Circles</h2>
    <p>When "Aromatic circles" option is enabled, these molecules should show circles inside aromatic rings instead of alternating double bonds:</p>

    <div class="molecule-example">
      <div class="molecule-label">Benzene (C6H6):</div>
      <p>chem:benzene:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Toluene (C7H8):</div>
      <p>chem:toluene:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Aspirin (Acetylsalicylic acid):</div>
      <p>chem:aspirin:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Caffeine:</div>
      <p>chem:caffeine:</p>
    </div>
  </div>

  <div class="test-section">
    <h2>Test 2: Dark Mode Functional Groups</h2>
    <p>In dark mode, ALL atom labels (O, N, Cl, Br, etc.) should be WHITE and visible. Previously, only bond lines turned white, but atom labels stayed black (invisible).</p>

    <div class="molecule-example">
      <div class="molecule-label">Ethanol (C2H5OH) - has O atom:</div>
      <p>chem:ethanol:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Acetone (C3H6O) - has O atom:</div>
      <p>chem:acetone:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Acetic Acid (CH3COOH) - has O atoms:</div>
      <p>chem:acetic acid:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Chloroform (CHCl3) - has Cl atoms:</div>
      <p>chem:CHCl3:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Glucose - has multiple O atoms:</div>
      <p>chem:glucose:</p>
    </div>
  </div>

  <div class="test-section">
    <h2>Test 3: Show Carbons Option</h2>
    <p>Enable "Show carbons" in extension options and reload. Carbon atoms should be labeled with "C":</p>

    <div class="molecule-example">
      <div class="molecule-label">Methane (CH4):</div>
      <p>chem:methane:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Ethane (C2H6):</div>
      <p>chem:ethane:</p>
    </div>
  </div>

  <div class="test-section">
    <h2>Test 4: Show Methyls Option</h2>
    <p>Enable "Show methyls" in extension options and reload. Methyl groups (CH3) should be shown explicitly:</p>

    <div class="molecule-example">
      <div class="molecule-label">Ethanol with methyls:</div>
      <p>chem:ethanol:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Toluene with methyls:</div>
      <p>chem:toluene:</p>
    </div>
  </div>

  <div class="test-section">
    <h2>Test 5: Combined SMILES Input</h2>
    <p>Test with direct SMILES strings:</p>

    <div class="molecule-example">
      <div class="molecule-label">Water (SMILES: O):</div>
      <p>chem:O:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Ammonia (SMILES: N):</div>
      <p>chem:N:</p>
    </div>

    <div class="molecule-example">
      <div class="molecule-label">Methanol (SMILES: CO):</div>
      <p>chem:CO:</p>
    </div>
  </div>

  <div class="success-criteria">
    <h3>Success Criteria Checklist</h3>
    <ul>
      <li><strong>Aromatic Circles:</strong> Benzene and other aromatic rings show circles when option is enabled</li>
      <li><strong>Dark Mode - Bonds:</strong> All bond lines appear white in dark mode</li>
      <li><strong>Dark Mode - Atom Labels:</strong> O, N, Cl, Br, etc. appear white (NOT black/invisible)</li>
      <li><strong>Dark Mode - Methyl Groups:</strong> CH3, CH2, etc. text labels appear white</li>
      <li><strong>Show Carbons:</strong> Carbon atoms are labeled when option is enabled</li>
      <li><strong>Show Methyls:</strong> Methyl groups are shown explicitly when option is enabled</li>
      <li><strong>Options Persist:</strong> Settings remain after closing and reopening browser</li>
      <li><strong>Page Reload Required:</strong> Options only apply after reloading the page (expected behavior)</li>
    </ul>
  </div>

  <div class="instructions">
    <h3>Troubleshooting</h3>
    <ol>
      <li><strong>Images not showing:</strong> Ensure all servers are running (run START_ALL_SERVERS.bat)</li>
      <li><strong>Options not applying:</strong> Make sure to reload the page after changing options</li>
      <li><strong>Atom labels still black in dark mode:</strong> Verify dark mode is active in your OS/browser settings</li>
      <li><strong>Console errors:</strong> Open Chrome DevTools (F12) and check Console for error messages</li>
      <li><strong>Extension not loading:</strong> Check chrome://extensions/ to ensure the extension is enabled</li>
    </ol>
  </div>

  <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center; color: #888;">
    <p>mol2chemfig Fixes Test Page | ChemParser Project</p>
    <p>See MOL2CHEMFIG_FIXES_COMPLETE.md for detailed documentation</p>
  </footer>
</body>
</html>
